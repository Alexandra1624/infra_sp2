# Проект YaMDb
## _Описание_
Проект **YaMDb** собирает отзывы (**Review**) пользователей на произведения (**Titles**). Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий (**Category**) может быть расширен администратором.

Сами произведения в **YaMDb** не хранятся, здесь нельзя посмотреть фильм или послушать музыку. В каждой категории есть произведения: книги, фильмы или музыка.
Произведению может быть присвоен жанр (**Genre**) из списка предустановленных. Новые жанры может создавать только администратор.

Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы (**Review**) и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.
### Пользовательские роли
- **Аноним** — может просматривать описания произведений, читать отзывы и комментарии.
- **Аутентифицированный пользователь (user)** — может читать всё, как и Аноним, может публиковать отзывы и ставить оценки произведениям (фильмам/книгам/песенкам), может комментировать отзывы; может редактировать и удалять свои отзывы и комментарии, редактировать свои оценки произведений. Эта роль присваивается по умолчанию каждому новому пользователю.
- **Модератор (moderator)** — те же права, что и у Аутентифицированного пользователя, плюс право удалять и редактировать любые отзывы и комментарии.
- **Администратор (admin)** — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
- **Суперюзер Django** должен всегда обладать правами администратора, пользователя с правами admin. Даже если изменить пользовательскую роль суперюзера — это не лишит его прав администратора. Суперюзер — всегда администратор, но администратор — не обязательно суперюзер.
## Технологии
- Python 3.7.9
- Django 2.2.16
- Django Rest Framework 3.12.4
- gunicorn 20.0.4
- nginx 1.21.3
- PostgreSQL 13.0

## Установка
**1. Клонируйте репозиторий:**
```sh
git clone https://github.com/Alexandra1624/infra_sp2.git
```

**2. Создайте файл .env с переменными окружения для работы с базой данных:**
```sh
DB_ENGINE=django.db.backends.postgresql # указываем, что работаем с postgresql
DB_NAME=postgres # имя базы данных
POSTGRES_USER=postgres # логин для подключения к базе данных
POSTGRES_PASSWORD=postgres # пароль для подключения к БД (установите свой)
DB_HOST=db # название сервиса (контейнера)
DB_PORT=5432 # порт для подключения к БД
```

**3. Перейдите в директорию с файлом docker-compose.yaml и запустите контейнеры:**
```sh
cd infra
docker-compose up -d --build
```
**4. После успешного запуска контейнеров выполните миграции в проекте:**
```sh
docker-compose exec web python manage.py migrate
```
**5. Создайте суперпользователя:**
```sh
docker-compose exec web python manage.py createsuperuser
```
**6. Соберите статику:**
```sh
docker-compose exec web python manage.py collectstatic --no-input
```
**7. Создайте дамп (резервную копию) базы данных:**
```sh
docker-compose exec web python manage.py dumpdata > fixtures.json
```
Для остановки контейнеров и удаления всех зависимостей воспользуйтесь командой:
```sh
docker-compose down -v
```
Документация ReDoc по ссылке: http://localhost/redoc/

## Автор

**_Александра Радионова_**

https://github.com/Alexandra1624

https://t.me/alexandra_R1624

sashamain@yandex.ru
